(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03cc9882"],{"092f":function(e,t,s){"use strict";var n=s("8406"),o=s.n(n);o.a},"2a33":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{class:[e.prefixCls+"-wrap"]},[s("div",{class:[e.prefixCls+"-discuss"]},[s("div",{class:[e.prefixCls+"-discuss-title"]},[e._v("与"),e._m(0),e._v("对话中...")]),s("div",{class:[e.prefixCls+"-discuss-message-wrap"]},e._l(e.discuss,(function(t,n){return s("div",{key:n,class:[e.prefixCls+"-discuss-message-container"],style:{textAlign:"message"===t.type?"left":"right"}},[s("div",{class:[e.prefixCls+"-discuss-message",e.prefixCls+"-"+t.type],attrs:{"data-action":!!t.options},domProps:{innerHTML:e._s(t.text)}}),t.options?s("div",{class:[e.prefixCls+"-action-container"]},e._l(t.options,(function(t){return s("button",{key:t.title,class:[e.prefixCls+"-action-button"],on:{click:function(s){return e.actionClick(n,t)}}},[e._v(e._s(t.title))])})),0):e._e()])})),0)]),s("Markdown",{attrs:{content:e.content}})],1)},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ruby",[e._v("凌寒初见"),s("rt",[e._v("こんにちは")])])}],i=s("9f12"),c=s("53fe"),r=s("8b83"),a=s("c65a"),u=s("c03e"),l=s("9ab4"),h=(s("99af"),s("bf2d")),p=s("d257"),f=function(){function e(t){Object(i["a"])(this,e),this.maxReconnect=3,this.reconnectCount=0,this.reconnectTimeout=3e3,this.connectEvent="welcome_back",this.options=t,this.socket=new WebSocket(t.wsUrl),this.monitor()}return Object(c["a"])(e,[{key:"getSocket",value:function(){return this.socket}},{key:"send",value:function(e){var t="object"===Object(h["a"])(e)?e:{type:"message",text:e,user:this.UUID,channel:"socket"};this.socket.send(JSON.stringify(t))}},{key:"close",value:function(){this.socket.removeEventListener("open",this.open.bind(this)),this.socket.removeEventListener("message",this.options.onMessage),this.socket.removeEventListener("error",this.options.onError),this.socket.removeEventListener("close",this.reconnect.bind(this)),this.socket.close()}},{key:"monitor",value:function(){this.socket.addEventListener("open",this.open.bind(this)),this.socket.addEventListener("message",this.options.onMessage),this.socket.addEventListener("error",this.options.onError),this.socket.addEventListener("close",this.reconnect.bind(this))}},{key:"open",value:function(e){this.reconnectCount=0;var t={type:this.connectEvent,channel:"socket",user:this.UUID,user_profile:null};this.send(t),this.options.onOpen&&this.options.onOpen(e)}},{key:"reconnect",value:function(t){var s=this;this.reconnectCount<this.maxReconnect&&setTimeout((function(){s.reconnectCount+=1,e.instance=new e(s.options)}),this.reconnectTimeout),this.options.onClose&&this.options.onClose(t)}},{key:"UUID",get:function(){var e="",t=Object(p["i"])("botkit-uuid");if(!t){e+=Object(p["l"])();for(var s=0,n=4;s<n;s++)e+="".concat(Object(p["l"])(),"-").concat(Object(p["l"])());e+=Object(p["l"])(),Object(p["c"])("botkit-uuid",e),this.connectEvent="hello"}return t||e}}],[{key:"getInstance",value:function(t){return this.instance||(this.instance=new e(t)),this.instance}},{key:"isSocket",value:function(){return void 0!==("undefined"===typeof WebSocket?"undefined":Object(h["a"])(WebSocket))}}]),e}(),d=s("e6e0"),k=s("60a3"),v=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(r["a"])(this,Object(a["a"])(t).apply(this,arguments)),e.prefixCls="me",e.discuss=[],e.content='<p><em>2018/11/6 接入 Google AdSense；<br> 2018/6/6 博客 Android <a href="https://2heng.xin/client/">客户端</a>上线；<br> 2018/5/24 网页使用了思源宋体，即时加载中文字体有一定网速压力，可选择本地安装<a href="https://cloud.moezx.cc/Fonts/思源宋体【开源】/" target="_blank" rel="nofollow">思源宋体</a>；<br> 2018/4/25 <a href="https://mashiro.top/" target="_blank" rel="nofollow">笔记本</a>改用 Hexo — Simple is the best；<br> 2017/11/26 起使用新主题 <a href="https://2heng.xin/theme-sakura/">Sakura</a>；<br> 2017/8/9 - 2017/11/26 使用的主题 <a href="https://github.com/moezx/Moezx-WP-theme" target="_blank" rel="nofollow">Moezx</a>；<br> 2017/8/9 博客由 Jeklly 平台迁移至 WordPress。</em></p>',e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"botkit",value:function(){var e=this,t={wsUrl:"ws://myrove.cn/api/message",onMessage:function(s){try{var n=JSON.parse(s.data),o=n.options;delete n.options,e.discuss.push(n),t&&setTimeout((function(){return e.$set(e.discuss[e.discuss.length-1],"options",o)}),1e3)}catch(i){console.error(i)}},onError:function(e){console.error(e)}};return f.getInstance(t)}},{key:"actionClick",value:function(e,t){this.$set(this.discuss[e],"options",void 0),this.discuss.push({type:"wanderer-message",text:t.title}),this.discussBotkit&&this.discussBotkit.send(t.payload)}},{key:"mounted",value:function(){this.discussBotkit=this.botkit()}}]),t}(k["f"]);v=Object(l["a"])([Object(k["a"])({name:"Me",components:{Markdown:d["a"]}})],v);var b=v,m=b,y=(s("092f"),s("2877")),g=Object(y["a"])(m,n,o,!1,null,"02f35bf7",null);t["default"]=g.exports},8406:function(e,t,s){}}]);
//# sourceMappingURL=chunk-03cc9882.6c37addc.js.map